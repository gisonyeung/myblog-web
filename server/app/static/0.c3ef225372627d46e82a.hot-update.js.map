{"version":3,"sources":["webpack:///./src/actions/site.js?4b9d"],"names":["fetchSiteNumbers","dispatch","POST","getSiteNum","then","data","result","console","log","reason","type","RECEIVE_FETCH_SUMMATION","payload","blog","numbers","comment","subscribe","catch","err","openSubscribeModal","OPEN_SUBSCRIBE","closeSubscribeModal","CLOSE_SUBSCRIBE","addSubscribe","formData","requestAction","REQUEST_SUBSCRIBE","failAction","FAILED_SUBSCRIBE","receiveAction","RECEIVE_SUBSCRIBE"],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA,KAAMA,mBAAmB,SAAnBA,gBAAmB,CAACC,QAAD,EAAc;AACrC,mBAAMC,IAAN,CAAW,cAAIC,UAAf,EACCC,IADD,CACM,gBAAQ;AACb,SAAKC,KAAKC,MAAL,KAAgB,SAArB,EAAiC;AAC/BC,eAAQC,GAAR,CAAY,YAAZ,EAA0BH,KAAKI,MAA/B;AACA,cAAO,KAAP;AACD;AACDR,cAAS;AACPS,aAAM,gBAAKC,uBADJ;AAEPC,gBAAS;AACNC,eAAMR,KAAKS,OAAL,CAAa,CAAb,CADA;AAENC,kBAASV,KAAKS,OAAL,CAAa,CAAb,CAFH;AAGNE,oBAAWX,KAAKS,OAAL,CAAa,CAAb;AAHL;AAFF,MAAT;AAQA,IAdD,EAeCG,KAfD,CAeO,eAAO;AACbV,aAAQC,GAAR,CAAY,YAAZ,EAA0BU,GAA1B;AACA,IAjBD;AAkBD,EAnBD;;AAqBA;AACA,KAAMC,qBAAqB;AACzBT,SAAM,gBAAKU;AADc,EAA3B;AAGA,KAAMC,sBAAsB;AAC1BX,SAAM,gBAAKY;AADe,EAA5B;;AAIA,KAAMC,eAAe,SAAfA,YAAe,CAACC,QAAD;AAAA,UAAc,UAACvB,QAAD,EAAc;;AAE/CA,cAAS,kBAAQwB,aAAR,CAAsB,gBAAKC,iBAA3B,CAAT;AACA,qBAAMxB,IAAN,CAAW,cAAIqB,YAAf,EAA6BC,QAA7B,EACCpB,IADD,CACM,gBAAQ;AACZ,WAAKC,KAAKC,MAAL,KAAgB,SAArB,EAAiC;AAC/BL,kBAAS,kBAAQ0B,UAAR,CAAmB,gBAAKC,gBAAxB,EAA0CvB,KAAKI,MAA/C,CAAT;AACA,gBAAO,KAAP;AACD;AACDR,gBAAS,kBAAQ4B,aAAR,CAAsB,gBAAKC,iBAA3B,CAAT;AACD,MAPD,EAQCb,KARD,CAQO,eAAO;AACdhB,gBAAS,kBAAQ0B,UAAR,CAAmB,gBAAKC,gBAAxB,EAA0CV,GAA1C,CAAT;AACC,MAVD;AAYD,IAfoB;AAAA,EAArB;;mBAiBe;AACblB,qCADa;AAEbmB,yCAFa;AAGbE,2CAHa;AAIbE;AAJa,E","file":"0.c3ef225372627d46e82a.hot-update.js","sourcesContent":["import fetch from '../utils/fetch';\r\nimport { Site } from \"../constants\";\r\nimport Api from \"../constants/Api\";\r\nimport _ from \"lodash\";\r\nimport network from \"./network\";\r\n\r\n// 获取站点数据\r\nconst fetchSiteNumbers = (dispatch) => {\r\n  fetch.POST(Api.getSiteNum)\r\n  .then(data => {\r\n  \tif ( data.result !== 'success' ) {\r\n  \t  console.log('请求站点数据失败: ', data.reason)\r\n  \t  return false;\r\n  \t}\r\n  \tdispatch({\r\n  \t  type: Site.RECEIVE_FETCH_SUMMATION,\r\n  \t  payload: {\r\n        blog: data.numbers[0],\r\n        comment: data.numbers[1],\r\n        subscribe: data.numbers[2],\r\n      },\r\n  \t});\r\n  })\r\n  .catch(err => {\r\n  \tconsole.log('请求站点数据失败: ', err)\r\n  });\r\n}\r\n\r\n// 开关订阅框\r\nconst openSubscribeModal = {\r\n  type: Site.OPEN_SUBSCRIBE\r\n};\r\nconst closeSubscribeModal = {\r\n  type: Site.CLOSE_SUBSCRIBE\r\n}\r\n\r\nconst addSubscribe = (formData) => (dispatch) => {\r\n\r\n  dispatch(network.requestAction(Site.REQUEST_SUBSCRIBE));\r\n  fetch.POST(Api.addSubscribe, formData)\r\n  .then(data => {\r\n    if ( data.result !== 'success' ) {\r\n      dispatch(network.failAction(Site.FAILED_SUBSCRIBE, data.reason));\r\n      return false;\r\n    }\r\n    dispatch(network.receiveAction(Site.RECEIVE_SUBSCRIBE));\r\n  })\r\n  .catch(err => {\r\n  dispatch(network.failAction(Site.FAILED_SUBSCRIBE, err));\r\n  });\r\n\r\n}\r\n\r\nexport default {\r\n  fetchSiteNumbers,\r\n  openSubscribeModal,\r\n  closeSubscribeModal,\r\n  addSubscribe,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/actions/site.js"],"sourceRoot":""}