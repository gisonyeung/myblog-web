{"version":3,"sources":["webpack:///./src/utils/formCheck.js?fb1a"],"names":["Scene","album","add","edit","audio","anchor","checkHelper","isEmptyStr","str","isString","test","isBoolean","isNumber","nickname","_resHandler","length","email","formCheck","formData","scene","err","error"],"mappings":";;;;;;;;;;;;;;;;;AAoBA;;;;;;AAEA,KAAMA,QAAQ;AACZC,UAAO;AACLC,UAAK,WADA;AAELC,WAAM;AAFD,IADK;AAKZC,UAAO;AACLF,UAAK,WADA;AAELC,WAAM;AAFD,IALK;AASZE,WAAQ;AACNH,UAAK,YADC;AAENC,WAAM;AAFA;AATI,EAAd,C,CAtBA;;;;;;;;;;;;;;;;;;;;;;AAqCA,KAAMG,cAAc;AAClBC,aADkB,sBACPC,GADO,EACF;AACd,YAAQ,CAAC,iBAAEC,QAAF,CAAWD,GAAX,CAAD,IAAoB,CAAC,KAAKE,IAAL,CAAUF,GAAV,CAArB,IAAuCA,QAAQ,WAAvD;AACD,IAHiB;AAIlBG,YAJkB,qBAIRH,GAJQ,EAIH;AACb,YAAO,iBAAEG,SAAF,CAAYH,GAAZ,CAAP;AACD,IANiB;AAOlBI,WAPkB,oBAOTJ,GAPS,EAOJ;AACZ,YAAO,iBAAEI,QAAF,CAAWJ,GAAX,CAAP;AACD,IATiB;AAUlBK,WAVkB,oBAUTL,GAVS,EAUJ;AACZ,SAAKF,YAAYC,UAAZ,CAAuBC,GAAvB,CAAL,EAAmC;AACjC,cAAOM,YAAY,QAAZ,CAAP;AACD,MAFD,MAEO,IAAKN,IAAIO,MAAJ,GAAa,EAAlB,EAAuB;AAC5B,cAAOD,YAAY,kBAAZ,CAAP;AACD,MAFM,MAEA;AACL,cAAOA,aAAP;AACD;AACF,IAlBiB;AAmBlBE,QAnBkB,iBAmBZR,GAnBY,EAmBP;AACV,SAAKF,YAAYC,UAAZ,CAAuBC,GAAvB,CAAL,EAAmC;AACjC,cAAOM,YAAY,QAAZ,CAAP;AACD,MAFD,MAEO,IAAK,CAAC,0CAA0CJ,IAA1C,CAA+CF,GAA/C,CAAN,EAA4D;AACjE,cAAOM,YAAY,UAAZ,CAAP;AACD,MAFM,MAEA;AACL,cAAOA,aAAP;AACD;AACD;AA3BiB,EAApB;;AA+BA,KAAMG,YAAY,SAAZA,SAAY,CAASC,QAAT,EAAmBC,KAAnB,EAA0B;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAED,EAjBD;;AAoBA,UAASL,WAAT,GAA+B;AAAA,OAAVM,GAAU,uEAAJ,EAAI;;AAC7B,UAAO;AACLC,YAAOD;AADF,IAAP;AAGD;;SAICpB,K,GAAAA,K;SACAiB,S,GAAAA,S;SACAX,W,GAAAA,W","file":"0.0443c8d4def1a1603b31.hot-update.js","sourcesContent":["/*\r\n * 页面上所有的表单校验规则都封装到这个模块里，按场景校验。\r\n *\r\n *\r\n * 调用方法：\r\n * import { formCheck, Scene } from './formCheck.js'\r\n * const check_result = formCheck(formData, scene);\r\n * if ( check_result.error ) {\r\n *   Toast.error(check_result.error);\r\n * } else {\r\n *   // do some action...\r\n * }\r\n *\r\n * @param formData { Object } 表单对象\r\n * @param secen { String } 校验场景，引用 Scene\r\n * @return { Object }\r\n *   {\r\n *     error: '' || errorMsg\r\n *   }\r\n */\r\nimport _ from 'lodash';\r\n\r\nconst Scene = {\r\n  album: {\r\n    add: 'ALBUM_ADD',\r\n    edit: 'ALBUM_EDIT',\r\n  },\r\n  audio: {\r\n    add: 'AUDIO_ADD',\r\n    edit: 'AUDIO_EDIT',\r\n  },\r\n  anchor: {\r\n    add: 'ANCHOR_ADD',\r\n    edit: 'ANCHOR_EDIT',\r\n  },\r\n}\r\n\r\nconst checkHelper = {\r\n  isEmptyStr(str) {\r\n    return  !_.isString(str) || !/\\S/.test(str) || str === 'undefined';\r\n  },\r\n  isBoolean(str) {\r\n    return _.isBoolean(str);\r\n  },\r\n  isNumber(str) {\r\n    return _.isNumber(str);\r\n  },\r\n  nickname(str) {\r\n    if ( checkHelper.isEmptyStr(str) ) {\r\n      return _resHandler('昵称不能为空');\r\n    } else if ( str.length > 20 ) {\r\n      return _resHandler('昵称过长，不能超过 20 个字符');\r\n    } else {\r\n      return _resHandler();\r\n    }\r\n  },\r\n  email(str) {\r\n  \tif ( checkHelper.isEmptyStr(str) ) {\r\n  \t  return _resHandler('邮箱不能为空');\r\n  \t} else if ( !/^(\\w)+(\\.\\w+)*@(\\w)+((\\.\\w{2,3}){1,3})$/.test(str) ) {\r\n  \t  return _resHandler('电子邮箱格式错误');\r\n  \t} else {\r\n  \t  return _resHandler();\r\n  \t}\r\n  }\r\n\r\n};\r\n\r\nconst formCheck = function(formData, scene) {\r\n\r\n  // switch (scene) {\r\n  //   case Scene.album.add:\r\n  //     return _albumAdd(formData);\r\n  //   case Scene.album.edit:\r\n  //     return _albumEdit(formData);\r\n  //   case Scene.audio.add:\r\n  //     return _audioAdd(formData);\r\n  //   case Scene.audio.edit:\r\n  //     return _audioEdit(formData);\r\n  //   case Scene.anchor.add:\r\n  //     return _anchorAdd(formData);\r\n  //   case Scene.anchor.edit:\r\n  //     return _anchorEdit(formData);\r\n  // }\r\n\r\n};\r\n\r\n\r\nfunction _resHandler(err = '') {\r\n  return {\r\n    error: err,\r\n  }\r\n}\r\n\r\n\r\nexport {\r\n  Scene,\r\n  formCheck,\r\n  checkHelper,\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/formCheck.js"],"sourceRoot":""}