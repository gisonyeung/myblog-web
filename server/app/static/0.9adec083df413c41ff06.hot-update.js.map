{"version":3,"sources":["webpack:///./src/containers/ArticlePanel.jsx?f86e","webpack:///./src/containers/ArticleHot.jsx?1ef1","webpack:///./src/utils/localStorage.js?b2c4","webpack:///./src/utils/parseJSON.js?e02b"],"names":["ArticlePanel","props","getBlogDetail","blogId","getNearBlog","nextProps","fetchStatus","blog","nearBlog","status","FETCHING","FAILED","DONE","title","time","createAt","updateAt","category","content","tags","numbers","mapStateToProps","state","branch_state","currentBlog","mapDispatchToProps","dispatch","ArticleHot","BlogLike","get","isLike","likeNum","like","is_like_success","set","setState","addLike","table","localStorage","getItem","str","JSON","stringify","setItem","parseJSON","data","jsonData","parse","e","console","log"],"mappings":"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","file":"0.9adec083df413c41ff06.hot-update.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router';\r\nimport { connect } from \"react-redux\";\r\nimport ArticleContent from '../components/blog/ArticleContent';\r\nimport ArticleHot from './ArticleHot';\r\n// import ArticleComment from './ArticleComment';\r\nimport blog from '../actions/blog';\r\nimport { Status } from '../constants';\r\n\r\n\r\nclass ArticlePanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    props.getBlogDetail(props.blogId);\r\n    props.getNearBlog(props.blogId);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if ( nextProps.blogId != this.props.blogId ) {\r\n      nextProps.getBlogDetail(nextProps.blogId);\r\n      nextProps.getNearBlog(nextProps.blogId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { fetchStatus, blog, nearBlog } = this.props;\r\n\r\n    return (\r\n      <div className=\"article-main\">\r\n        {\r\n          fetchStatus.status === Status.FETCHING ?\r\n          <ArticleContent \r\n            title=\"正在加载文章内容...\"\r\n          />\r\n          : ''\r\n        }\r\n        {\r\n          fetchStatus.status === Status.FAILED ?\r\n          <ArticleContent \r\n            title={'此文章不存在'}\r\n          />\r\n          : ''\r\n        }\r\n        {\r\n          fetchStatus.status === Status.DONE ?\r\n          <ArticleContent \r\n            blogId={blog.blogId}\r\n            title={blog.title}\r\n            createAt={blog.time.createAt}\r\n            updateAt={blog.time.updateAt}\r\n            category={blog.category}\r\n            content={blog.content}\r\n            tags={blog.tags}\r\n            nearBlog={nearBlog}\r\n          />\r\n          : ''\r\n        }\r\n        {\r\n          fetchStatus.status === Status.DONE ?\r\n          <ArticleHot\r\n            blogId={blog.blogId}\r\n            numbers={blog.numbers}\r\n          />\r\n          : ''\r\n        }\r\n        {/*\r\n          fetchStatus.status === Status.DONE ?\r\n          <ArticleComment\r\n            blogId={blog.blogId || -1}\r\n          />\r\n          : ''\r\n        */}\r\n      </div>\r\n    )\r\n  }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const branch_state = state.blog.currentBlog;\r\n  return branch_state;\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch) => ({ \r\n  getBlogDetail: (blogId) => dispatch(blog.getBlogDetail(blogId)),\r\n  getNearBlog: (blogId) => dispatch(blog.getNearBlog(blogId)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ArticlePanel);\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ArticlePanel.jsx","import React, { Component } from 'react';\r\nimport { Link } from 'react-router';\r\nimport { connect } from \"react-redux\";\r\nimport ls from '../utils/localStorage';\r\nimport blog from '../actions/blog';\r\n\r\nclass ArticleHot extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    // 获取localStorage中点赞列表是否有此博文\r\n    let BlogLike = ls.get('BlogLike');\r\n    let isLike = false;\r\n\r\n    // 存在此键，则isLike设为true\r\n    if( BlogLike[props.blogId] ) {\r\n      isLike = true;\r\n    }\r\n\r\n    this.state = {\r\n      isLike: isLike,\r\n      likeNum: props.numbers.like,\r\n    }; \r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // 点赞成功，存进localStorage\r\n    if ( nextProps.is_like_success === true ) {\r\n      let BlogLike = ls.get('BlogLike');\r\n      BlogLike[this.props.blogId] = 1;\r\n      ls.set('BlogLike', BlogLike);\r\n    } else if ( nextProps.is_like_success === false ) { // 点赞失败，转换回原来状态\r\n      this.setState({\r\n        isLike: false,\r\n        likeNum: this.state.likeNum - 1,\r\n      });\r\n    }\r\n  }\r\n\r\n  addLike() {\r\n    // 点赞开关\r\n    if( !this.state.isLike ) {\r\n\r\n      // 转换状态\r\n      this.setState({\r\n        isLike: true,\r\n        likeNum: this.state.likeNum + 1,\r\n      });\r\n\r\n      this.props.addLike(this.props.blogId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"atc-hot\">\r\n        <div className={`widget ${this.state.isLike ? 'active' : ''}`}>\r\n          <span className=\"icon icon-like\" onClick={this.addLike}></span>\r\n          <p>点赞{ this.state.likeNum ? '(' + this.state.likeNum + ')' : '' }</p>\r\n        </div>\r\n        <div className=\"widget\">\r\n          <span className=\"icon icon-share\"></span>\r\n          <p>分享</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const branch_state = state.blog.currentBlog;\r\n  return branch_state;\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch) => ({ \r\n  addLike: (blogId) => dispatch(blog.addLike(blogId)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ArticleHot);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ArticleHot.jsx","import parseJSON from './parseJSON'\r\n\r\nexport default {\r\n\r\n\tget: function(table) {\r\n\t\ttable = localStorage.getItem(table);\r\n\t\treturn parseJSON(table);\r\n\t},\r\n\r\n\tset: function(table, str) {\r\n\t\tstr = JSON.stringify(str);\r\n\t\tlocalStorage.setItem(table, str);\r\n\t},\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/localStorage.js","/*\r\n\t转换JSON对象\r\n    @data { String } JSON字符串\r\n    @return { Object } 转换后的JSON对象\r\n*/\r\nexport default function parseJSON(data){\r\n\tif ( !data ) {\r\n        return {};\r\n    }\r\n    var jsonData = {};\r\n    if (typeof data === \"object\") {\r\n        return data;\r\n    }\r\n    try {\r\n        jsonData = JSON.parse(data);\r\n    } catch (e) {\r\n        console.log(\"parse JSON error,\", e);\r\n    }\r\n    if (typeof jsonData === \"string\") {\r\n        return {}\r\n    }\r\n    return jsonData;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/parseJSON.js"],"sourceRoot":""}