{"version":3,"sources":["webpack:///./src/actions/blog.js?f871"],"names":["_changePageActionCreator","nextPage","type","CHANGE_PAGE","payload","initPageNum","current","dispatch","parseInt","POST","getBlogTotalPage","then","data","result","console","log","reason","UPDATE_PAGE_INFO","total","page","hasInit","catch","err","fetchPageBlogs","requestAction","REQUEST_FETCH_BLOGS","getBlogsByPage","failAction","FAILED_FETCH_BLOGS","receiveAction","RECEIVE_FETCH_BLOGS","blogs","getBlogDetail","blogId","REQUEST_FETCH_BLOG","FAILED_FETCH_BLOG","RECEIVE_FETCH_BLOG","blog","getNearBlog","UPDATE_NEARBLOG","nearBlog","addLike","addBlogLike","FAILED_ADD_LIKE","RECEIVE_ADD_LIKE"],"mappings":"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","file":"0.2d6878eb0de5d8d0e7b4.hot-update.js","sourcesContent":["import fetch from '../utils/fetch';\r\nimport { Blog } from \"../constants\";\r\nimport Api from \"../constants/Api\";\r\nimport _ from \"lodash\";\r\n\r\nimport network from './network';\r\n\r\nfunction _changePageActionCreator(nextPage) {\r\n  return {\r\n    type: Blog.CHANGE_PAGE,\r\n    payload: nextPage\r\n  };\r\n}\r\n\r\n\r\n// 初始化页码信息，请求总页数\r\nconst initPageNum = (current) => (dispatch) => {\r\n  current = parseInt(current, 10);\r\n\r\n  dispatch(_changePageActionCreator(current));\r\n  fetch.POST(Api.getBlogTotalPage)\r\n  .then(data => {\r\n  \tif ( data.result !== 'success' ) {\r\n  \t  console.log('请求总页码失败: ', data.reason)\r\n  \t  return false;\r\n  \t}\r\n  \tdispatch({\r\n  \t  type: Blog.UPDATE_PAGE_INFO,\r\n  \t  payload: {\r\n  \t  \tcurrent: current,\r\n  \t  \ttotal: data.page,\r\n        hasInit: true,\r\n  \t  }\r\n  \t});\r\n  })\r\n  .catch(err => {\r\n  \tconsole.log('请求总页码失败: ', err)\r\n  });\r\n}\r\n\r\n// 修改页码，并请求当前页码下的博文\r\nconst fetchPageBlogs = (current) => (dispatch) => {\r\n  current = parseInt(current, 10);\r\n\r\n  dispatch(_changePageActionCreator(current));\r\n  dispatch(network.requestAction(Blog.REQUEST_FETCH_BLOGS));\r\n  fetch.POST(Api.getBlogsByPage, {\r\n    page: current\r\n  })\r\n  .then(data => {\r\n  \tif ( data.result !== 'success' ) {\r\n  \t  dispatch(network.failAction(Blog.FAILED_FETCH_BLOGS, data.reason));\r\n  \t  return false;\r\n  \t}\r\n  \tdispatch(network.receiveAction(Blog.RECEIVE_FETCH_BLOGS, data.blogs));\r\n  })\r\n  .catch(err => {\r\n\t dispatch(network.failAction(Blog.FAILED_FETCH_BLOGS, err));\r\n  });\r\n\r\n}\r\n\r\n\r\n// 请求博文详情\r\nconst getBlogDetail = (blogId) => (dispatch) => {\r\n\r\n  dispatch(network.requestAction(Blog.REQUEST_FETCH_BLOG));\r\n  fetch.POST(Api.getBlogDetail, {\r\n    blogId: blogId\r\n  })\r\n  .then(data => {\r\n    if ( data.result !== 'success' ) {\r\n      dispatch(network.failAction(Blog.FAILED_FETCH_BLOG, data.reason));\r\n      return false;\r\n    }\r\n    dispatch(network.receiveAction(Blog.RECEIVE_FETCH_BLOG, data.blog));\r\n  })\r\n  .catch(err => {\r\n    dispatch(network.failAction(Blog.FAILED_FETCH_BLOG, err));\r\n  });\r\n\r\n}\r\n\r\n\r\n// 请求博文详情\r\nconst getNearBlog = (blogId) => (dispatch) => {\r\n\r\n  fetch.POST(Api.getNearBlog, {\r\n    blogId: blogId\r\n  })\r\n  .then(data => {\r\n    if ( data.result !== 'success' ) {\r\n      console.log('请求相邻博文失败，' + data.reason);\r\n      return false;\r\n    }\r\n    dispatch(network.receiveAction(Blog.UPDATE_NEARBLOG, data.nearBlog));\r\n  })\r\n  .catch(err => {\r\n    console.log('请求相邻博文失败，' + err);\r\n  });\r\n\r\n}\r\n\r\n// 点赞增加\r\nconst addLike = (blogId) => (dispatch) => {\r\n\r\n  \r\n  fetch.POST(Api.addBlogLike, {\r\n    blogId: blogId\r\n  })\r\n  .then(data => {\r\n    if ( data.result !== 'success' ) {\r\n      dispatch({ type: Blog.FAILED_ADD_LIKE });\r\n      console.log('点赞博文失败，' + data.reason);\r\n      return false;\r\n    }\r\n    dispatch({ type: Blog.RECEIVE_ADD_LIKE });\r\n  })\r\n  .catch(err => {\r\n    dispatch({ type: Blog.FAILED_ADD_LIKE });\r\n    console.log('点赞博文失败，' + err);\r\n  });\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  initPageNum,\r\n  fetchPageBlogs,\r\n  getBlogDetail,\r\n  getNearBlog,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/actions/blog.js"],"sourceRoot":""}