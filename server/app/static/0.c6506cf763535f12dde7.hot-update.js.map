{"version":3,"sources":["webpack:///./src/actions/blog.js?f871"],"names":["_changePageActionCreator","nextPage","type","CHANGE_PAGE","payload","initPageNum","current","dispatch","parseInt","POST","getBlogTotalPage","then","data","result","console","log","reason","UPDATE_PAGE_INFO","total","page","hasInit","catch","err","fetchPageBlogs","requestAction","REQUEST_FETCH_BLOGS","fetchBlogByPage","failAction","FAILED_FETCH_BLOGS","receiveAction","RECEIVE_FETCH_BLOGS","blogs","getBlogDetail","blogId","REQUEST_FETCH_BLOG","FAILED_FETCH_BLOG","RECEIVE_FETCH_BLOG","blog"],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,UAASA,wBAAT,CAAkCC,QAAlC,EAA4C;AAC1C,UAAO;AACLC,WAAM,gBAAKC,WADN;AAELC,cAASH;AAFJ,IAAP;AAID;;AAGD;AACA,KAAMI,cAAc,SAAdA,WAAc,CAACC,OAAD;AAAA,UAAa,UAACC,QAAD,EAAc;AAC7CD,eAAUE,SAASF,OAAT,EAAkB,EAAlB,CAAV;;AAEAC,cAASP,yBAAyBM,OAAzB,CAAT;AACA,qBAAMG,IAAN,CAAW,cAAIC,gBAAf,EACCC,IADD,CACM,gBAAQ;AACb,WAAKC,KAAKC,MAAL,KAAgB,SAArB,EAAiC;AAC/BC,iBAAQC,GAAR,CAAY,WAAZ,EAAyBH,KAAKI,MAA9B;AACA,gBAAO,KAAP;AACD;AACDT,gBAAS;AACPL,eAAM,gBAAKe,gBADJ;AAEPb,kBAAS;AACRE,oBAASA,OADD;AAERY,kBAAON,KAAKO,IAFJ;AAGNC,oBAAS;AAHH;AAFF,QAAT;AAQA,MAdD,EAeCC,KAfD,CAeO,eAAO;AACbP,eAAQC,GAAR,CAAY,WAAZ,EAAyBO,GAAzB;AACA,MAjBD;AAkBD,IAtBmB;AAAA,EAApB;;AAwBA;AACA,KAAMC,iBAAiB,SAAjBA,cAAiB,CAACjB,OAAD;AAAA,UAAa,UAACC,QAAD,EAAc;AAChDD,eAAUE,SAASF,OAAT,EAAkB,EAAlB,CAAV;;AAEAC,cAASP,yBAAyBM,OAAzB,CAAT;AACAC,cAAS,kBAAQiB,aAAR,CAAsB,gBAAKC,mBAA3B,CAAT;AACA,qBAAMhB,IAAN,CAAW,cAAIiB,eAAf,EAAgC;AAC9BP,aAAMb;AADwB,MAAhC,EAGCK,IAHD,CAGM,gBAAQ;AACb,WAAKC,KAAKC,MAAL,KAAgB,SAArB,EAAiC;AAC/BN,kBAAS,kBAAQoB,UAAR,CAAmB,gBAAKC,kBAAxB,EAA4ChB,KAAKI,MAAjD,CAAT;AACA,gBAAO,KAAP;AACD;AACDT,gBAAS,kBAAQsB,aAAR,CAAsB,gBAAKC,mBAA3B,EAAgDlB,KAAKmB,KAArD,CAAT;AACA,MATD,EAUCV,KAVD,CAUO,eAAO;AACfd,gBAAS,kBAAQoB,UAAR,CAAmB,gBAAKC,kBAAxB,EAA4CN,GAA5C,CAAT;AACE,MAZD;AAcD,IAnBsB;AAAA,EAAvB;;AAsBA;AACA,KAAMU,gBAAgB,SAAhBA,aAAgB,CAACC,MAAD;AAAA,UAAY,UAAC1B,QAAD,EAAc;;AAE9CA,cAAS,kBAAQiB,aAAR,CAAsB,gBAAKU,kBAA3B,CAAT;AACA,qBAAMzB,IAAN,CAAW,cAAIuB,aAAf,EAA8B;AAC5BC,eAAQA;AADoB,MAA9B,EAGCtB,IAHD,CAGM,gBAAQ;AACZ,WAAKC,KAAKC,MAAL,KAAgB,SAArB,EAAiC;AAC/BN,kBAAS,kBAAQoB,UAAR,CAAmB,gBAAKQ,iBAAxB,EAA2CvB,KAAKI,MAAhD,CAAT;AACA,gBAAO,KAAP;AACD;AACDT,gBAAS,kBAAQsB,aAAR,CAAsB,gBAAKO,kBAA3B,EAA+CxB,KAAKyB,IAApD,CAAT;AACD,MATD,EAUChB,KAVD,CAUO,eAAO;AACdd,gBAAS,kBAAQoB,UAAR,CAAmB,gBAAKQ,iBAAxB,EAA2Cb,GAA3C,CAAT;AACC,MAZD;AAcD,IAjBqB;AAAA,EAAtB;;mBAmBe;AACbjB,2BADa;AAEbkB,iCAFa;AAGbS;AAHa,E","file":"0.c6506cf763535f12dde7.hot-update.js","sourcesContent":["import fetch from '../utils/fetch';\r\nimport { Blog } from \"../constants\";\r\nimport Api from \"../constants/Api\";\r\nimport _ from \"lodash\";\r\n\r\nimport network from './network';\r\n\r\nfunction _changePageActionCreator(nextPage) {\r\n  return {\r\n    type: Blog.CHANGE_PAGE,\r\n    payload: nextPage\r\n  };\r\n}\r\n\r\n\r\n// 初始化页码信息，请求总页数\r\nconst initPageNum = (current) => (dispatch) => {\r\n  current = parseInt(current, 10);\r\n\r\n  dispatch(_changePageActionCreator(current));\r\n  fetch.POST(Api.getBlogTotalPage)\r\n  .then(data => {\r\n  \tif ( data.result !== 'success' ) {\r\n  \t  console.log('请求总页码失败: ', data.reason)\r\n  \t  return false;\r\n  \t}\r\n  \tdispatch({\r\n  \t  type: Blog.UPDATE_PAGE_INFO,\r\n  \t  payload: {\r\n  \t  \tcurrent: current,\r\n  \t  \ttotal: data.page,\r\n        hasInit: true,\r\n  \t  }\r\n  \t});\r\n  })\r\n  .catch(err => {\r\n  \tconsole.log('请求总页码失败: ', err)\r\n  });\r\n}\r\n\r\n// 修改页码，并请求当前页码下的博文\r\nconst fetchPageBlogs = (current) => (dispatch) => {\r\n  current = parseInt(current, 10);\r\n\r\n  dispatch(_changePageActionCreator(current));\r\n  dispatch(network.requestAction(Blog.REQUEST_FETCH_BLOGS));\r\n  fetch.POST(Api.fetchBlogByPage, {\r\n    page: current\r\n  })\r\n  .then(data => {\r\n  \tif ( data.result !== 'success' ) {\r\n  \t  dispatch(network.failAction(Blog.FAILED_FETCH_BLOGS, data.reason));\r\n  \t  return false;\r\n  \t}\r\n  \tdispatch(network.receiveAction(Blog.RECEIVE_FETCH_BLOGS, data.blogs));\r\n  })\r\n  .catch(err => {\r\n\tdispatch(network.failAction(Blog.FAILED_FETCH_BLOGS, err));\r\n  });\r\n\r\n}\r\n\r\n\r\n// 请求博文详情\r\nconst getBlogDetail = (blogId) => (dispatch) => {\r\n\r\n  dispatch(network.requestAction(Blog.REQUEST_FETCH_BLOG));\r\n  fetch.POST(Api.getBlogDetail, {\r\n    blogId: blogId\r\n  })\r\n  .then(data => {\r\n    if ( data.result !== 'success' ) {\r\n      dispatch(network.failAction(Blog.FAILED_FETCH_BLOG, data.reason));\r\n      return false;\r\n    }\r\n    dispatch(network.receiveAction(Blog.RECEIVE_FETCH_BLOG, data.blog));\r\n  })\r\n  .catch(err => {\r\n  dispatch(network.failAction(Blog.FAILED_FETCH_BLOG, err));\r\n  });\r\n\r\n}\r\n\r\nexport default {\r\n  initPageNum,\r\n  fetchPageBlogs,\r\n  getBlogDetail\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/actions/blog.js"],"sourceRoot":""}