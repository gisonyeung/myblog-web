{"version":3,"sources":["webpack:///./src/containers/ArticleHot.jsx?1ef1"],"names":["ArticleHot","props","BlogLike","get","isLike","blogId","state","likeNum","numbers","like","nextProps","is_like_success","set","setState","addLike","bind","mapStateToProps","branch_state","blog","currentBlog","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;AACA;;;;AACA;;;;;;;;;;;;KAEMA,U;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAGjB;AAHiB,yHACXA,KADW;;AAIjB,SAAIC,WAAW,uBAAGC,GAAH,CAAO,UAAP,CAAf;AACA,SAAIC,SAAS,KAAb;;AAEA;AACA,SAAIF,SAASD,MAAMI,MAAf,CAAJ,EAA6B;AAC3BD,gBAAS,IAAT;AACD;;AAED,WAAKE,KAAL,GAAa;AACXF,eAAQA,MADG;AAEXG,gBAASN,MAAMO,OAAN,CAAcC;AAFZ,MAAb;;AAZiB;AAiBlB;;;;+CAEyBC,S,EAAW;AACnC;AACA,WAAKA,UAAUC,eAAV,KAA8B,IAAnC,EAA0C;AACxC,aAAIT,WAAW,uBAAGC,GAAH,CAAO,UAAP,CAAf;AACAD,kBAAS,KAAKD,KAAL,CAAWI,MAApB,IAA8B,CAA9B;AACA,gCAAGO,GAAH,CAAO,UAAP,EAAmBV,QAAnB;AACD,QAJD,MAIO,IAAKQ,UAAUC,eAAV,KAA8B,KAAnC,EAA2C;AAAE;AAClD,cAAKE,QAAL,CAAc;AACZT,mBAAQ,KADI;AAEZG,oBAAS,KAAKD,KAAL,CAAWC,OAAX,GAAqB;AAFlB,UAAd;AAID;AACF;;;+BAES;AACR;AACA,WAAI,CAAC,KAAKD,KAAL,CAAWF,MAAhB,EAAyB;;AAEvB;AACA,cAAKS,QAAL,CAAc;AACZT,mBAAQ,IADI;AAEZG,oBAAS,KAAKD,KAAL,CAAWC,OAAX,GAAqB;AAFlB,UAAd;;AAKA,cAAKN,KAAL,CAAWa,OAAX,CAAmB,KAAKb,KAAL,CAAWI,MAA9B;AACD;AACF;;;8BAEQ;AACP,cACE;AAAA;AAAA,WAAK,WAAU,SAAf;AACE;AAAA;AAAA,aAAK,wBAAqB,KAAKC,KAAL,CAAWF,MAAX,GAAoB,QAApB,GAA+B,EAApD,CAAL;AACE,mDAAM,WAAU,gBAAhB,EAAiC,SAAS,KAAKU,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA1C,GADF;AAEE;AAAA;AAAA;AAAA;AAAO,kBAAKT,KAAL,CAAWC,OAAX,GAAqB,MAAM,KAAKD,KAAL,CAAWC,OAAjB,GAA2B,GAAhD,GAAsD;AAA7D;AAFF,UADF;AAKE;AAAA;AAAA,aAAK,WAAU,QAAf;AACE,mDAAM,WAAU,iBAAhB,GADF;AAEE;AAAA;AAAA;AAAA;AAAA;AAFF;AALF,QADF;AAYD;;;;;;AAEF;;AAED,KAAMS,kBAAkB,SAAlBA,eAAkB,CAACV,KAAD,EAAW;AACjC,OAAMW,eAAeX,MAAMY,IAAN,CAAWC,WAAhC;AACA,UAAOF,YAAP;AACD,EAHD;;AAKA,KAAMG,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD;AAAA,UAAe;AACxCP,cAAS,iBAACT,MAAD;AAAA,cAAYgB,SAAS,eAAKP,OAAL,CAAaT,MAAb,CAAT,CAAZ;AAAA;AAD+B,IAAf;AAAA,EAA3B;;mBAIe,yBAAQW,eAAR,EAAyBI,kBAAzB,EAA6CpB,UAA7C,C","file":"0.7e39166267550ef2f1e6.hot-update.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router';\r\nimport { connect } from \"react-redux\";\r\nimport ls from '../utils/localStorage';\r\nimport blog from '../actions/blog';\r\n\r\nclass ArticleHot extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    // 获取localStorage中点赞列表是否有此博文\r\n    let BlogLike = ls.get('BlogLike');\r\n    let isLike = false;\r\n\r\n    // 存在此键，则isLike设为true\r\n    if( BlogLike[props.blogId] ) {\r\n      isLike = true;\r\n    }\r\n\r\n    this.state = {\r\n      isLike: isLike,\r\n      likeNum: props.numbers.like,\r\n    }; \r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // 点赞成功，存进localStorage\r\n    if ( nextProps.is_like_success === true ) {\r\n      let BlogLike = ls.get('BlogLike');\r\n      BlogLike[this.props.blogId] = 1;\r\n      ls.set('BlogLike', BlogLike);\r\n    } else if ( nextProps.is_like_success === false ) { // 点赞失败，转换回原来状态\r\n      this.setState({\r\n        isLike: false,\r\n        likeNum: this.state.likeNum - 1,\r\n      });\r\n    }\r\n  }\r\n\r\n  addLike() {\r\n    // 点赞开关\r\n    if( !this.state.isLike ) {\r\n\r\n      // 转换状态\r\n      this.setState({\r\n        isLike: true,\r\n        likeNum: this.state.likeNum + 1,\r\n      });\r\n\r\n      this.props.addLike(this.props.blogId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"atc-hot\">\r\n        <div className={`widget ${this.state.isLike ? 'active' : ''}`}>\r\n          <span className=\"icon icon-like\" onClick={this.addLike.bind(this)}></span>\r\n          <p>点赞{ this.state.likeNum ? '(' + this.state.likeNum + ')' : '' }</p>\r\n        </div>\r\n        <div className=\"widget\">\r\n          <span className=\"icon icon-share\"></span>\r\n          <p>分享</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const branch_state = state.blog.currentBlog;\r\n  return branch_state;\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch) => ({ \r\n  addLike: (blogId) => dispatch(blog.addLike(blogId)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ArticleHot);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ArticleHot.jsx"],"sourceRoot":""}